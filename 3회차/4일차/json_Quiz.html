<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 게임개발자, 네트워크 개발자, 프론트엔드 개발자, 백엔드 개발자, 데이터베이스 개발자, AI 개발자 등 다양한 분야에서 json 사용
      /*
          name : 영화제목
          rank : 관객 수 순위
          createdAt : 개봉 날짜
          salesRevenue : 판매액
          attendance : 관객수 */
      const movies = [
        {
          name: "명량",
          rank: 1,
          createdAt: "2014-07-30",
          salesRevenue: 135748398910,
          attendance: 17613682,
        },
        {
          name: "극한직업",
          rank: 2,
          createdAt: "2019-01-23",
          salesRevenue: 139647979516,
          attendance: 16264944,
        },
        {
          name: "신과함께-죄와 벌",
          rank: 3,
          createdAt: "2014-07-30",
          salesRevenue: 135748398910,
          attendance: 17613682,
        },
        {
          name: "국제시장",
          rank: 4,
          createdAt: "2014-07-30",
          salesRevenue: 110913469630,
          attendance: 14257115,
        },
        {
          name: "어벤져스: 엔드게임",
          rank: 5,
          createdAt: "2019-04-24",
          salesRevenue: 122182694160,
          attendance: 13934592,
        },
      ];
      /*
      우리나라에서 개봉한 역대 관객수 TOP5영화 데이터를 조회했다고 가정.
      문제 1번.
          영화 이름, 개봉날짜, 순위만 출력하시오.
      문제 2번.
          영화 명량과 어벤져스의 판매액 합산을 구하시오.
      문제 3번.
          관객수가 15000000넘은 영화의 이름과 개봉날짜 판매액을 출력하시오.
      문제 4번.
          1위 영화부터 5위 영화 판매액 평균을 구하시오.
      문제 5번.
          개봉날짜가 가장 최근인 영화의 이름과 개봉일 순위를 구하시오.
        */

      // 문제 1번.
      for (let i = 0; i < movies.length; i++) {
        console.log(
          "이름: " +
            movies[i].name +
            ", 개봉날짜: " +
            movies[i].createdAt +
            ", 순위: " +
            movies[i].rank
        );
      }

      // 문제 2번.
      let sum = 0;
      for (let i = 0; i < movies.length; i++) {
        if (
          movies[i].name == "명량" ||
          movies[i].name == "어벤져스: 엔드게임"
        ) {
          sum += movies[i].salesRevenue;
        }
      }
      console.log(
        "명량과 어벤져스 판매액 합산: " + sum.toLocaleString() + "원"
      );

      // 문제 3번.
      for (let i = 0; i < movies.length; i++) {
        if (movies[i].attendance > 15000000) {
          console.log(
            "이름: " +
              movies[i].name +
              ", 개봉날짜: " +
              movies[i].createdAt +
              ", 판매액: " +
              movies[i].salesRevenue.toLocaleString() +
              "원"
          );
        }
      }

      // 문제 4번.
      let sumSalesRevenue = 0;
      for (let i = 0; i < movies.length; i++) {
        sumSalesRevenue += movies[i].salesRevenue;
      }
      let avgSalesRevenue = sumSalesRevenue / movies.length;
      console.log("평균 판매액: " + avgSalesRevenue.toLocaleString() + "원");

      // 문제 5번.
      let mostRecentTime = 0;
      let mostRecentIndex = 0;

      for (let i = 0; i < movies.length; i++) {
        let time = new Date(movies[i]).getTime();

        if (mostRecentTime < time) {
          mostRecentTime = time;
          mostRecentIndex = i;
        }
      }

      console.log(
        "최근 영화 제목: " +
          movies[mostRecentIndex].name +
          ", 순위: " +
          movies[mostRecentIndex].rank
      );

      // 문제 1번 정답
      movies[0].name; // 배열 안에 있는 json 접근하는 방법
      for (let i = 0; i < movies.length; i++) {
        // 일반 for문
        console.log(movies[i].name);
        console.log(movies[i].createdAt);
        console.log(movies[i].rank);
      }

      // foreach문으로 풀어보기
      movies.forEach((e) => {
        console.log(e.name);
        console.log(e.createdAt);
        console.log(e.rank);
      });

      // 문제 2번 정답
      // foreach문으로 풀어보기
      let salesRevenueSum = 0;
      movies.forEach((e) => {
        if (e.name === "명량" || e.name === "어벤져스: 엔드게임") {
          salesRevenueSum += e.salesRevenue;
        }
      });
      console.log(
        "명량과 어벤져스 판매액 합산: " +
          salesRevenueSum.toLocaleString() +
          "원"
      );

      // 문제 3번 정답, 문제 4번 정답 forEach문으로 풀어보기
      // 문제 3번 정답
      movies.forEach((e) => {
        if (e.attendance > 15000000) {
          console.log(
            "이름: " +
              e.name +
              ", 개봉날짜: " +
              e.createdAt +
              ", 판매액: " +
              e.salesRevenue.toLocaleString() +
              "원"
          );
        }
      });

      // 문제 4번 정답
      salesRevenueSum = 0;
      movies.forEach((e) => {
        salesRevenueSum += e.salesRevenue;
      });
      let avaraSalesRevenue = salesRevenueSum / movies.length;
      console("평균 판매액: " + avaraSalesRevenue.toLocaleString() + "원");

      // 문제 5번 정답
      var max = 0;
      var temp = 0;

      movies.forEach((e, index) => {
        // e는 배열안에 있는 값을 의미하고, index는 배열의 순서를 의미함
        // 실무에서 날짜를 비교할 때는 항상 숫자로 먼저 변환해야 한다
        // 시간 관련된 함수를 사용하면 해결되긴 하지만, 함수를 사용하지 않을 때에는 위의 조건을 지켜야 한다
        let time = new Date(e.createdAt).getTime(); // 날짜 -> 숫자로 변환
        if (max < time) {
          max = time;
          temp = index; // index: 0, 1, 2, 3, 4 순서 의미함
        }
      });

      console.log("영화 이름: " + movies[temp].name);
      console.log("영화 개봉 날짜: " + movies[temp].createdAt);
      console.log("영화 누적관객 순위: " + movies[temp].rank);
    </script>
  </body>
</html>
